<ng-template #svgTemplateUnit>
  <img data-advancement-level="0" class="active" (click)="currentAdvancementLevel($event)" src="assets/other/locked_star.svg" alt="Locked Star">
  <svg width="25" *ngFor="let i of [1, 2, 3, 4, 5, 6]" [attr.data-advancement-level]="i" (click)="currentAdvancementLevel($event)" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.7527 3.59726C11.9928 3.11086 12.1129 2.86766 12.2758 2.78996C12.4176 2.72236 12.5824 2.72236 12.7242 2.78996C12.8871 2.86766 13.0072 3.11086 13.2473 3.59725L15.525 8.2118C15.5959 8.3554 15.6314 8.4272 15.6832 8.48294C15.729 8.5323 15.784 8.57229 15.8451 8.6007C15.9141 8.63278 15.9933 8.64436 16.1518 8.66752L21.2468 9.41224C21.7834 9.49067 22.0516 9.52988 22.1758 9.66092C22.2838 9.77494 22.3346 9.93161 22.314 10.0873C22.2904 10.2663 22.0962 10.4554 21.7078 10.8338L18.0223 14.4234C17.9074 14.5353 17.85 14.5913 17.8129 14.6578C17.7801 14.7168 17.7591 14.7815 17.7509 14.8485C17.7418 14.9241 17.7553 15.0032 17.7824 15.1612L18.652 20.2314C18.7437 20.7662 18.7896 21.0336 18.7034 21.1922C18.6284 21.3303 18.4951 21.4271 18.3407 21.4558C18.1631 21.4887 17.923 21.3624 17.4428 21.1099L12.8879 18.7145C12.746 18.6398 12.675 18.6025 12.6002 18.5878C12.534 18.5749 12.466 18.5749 12.3998 18.5878C12.325 18.6025 12.254 18.6398 12.1121 18.7145L7.55719 21.1099C7.07697 21.3624 6.83687 21.4887 6.65933 21.4558C6.50486 21.4271 6.37157 21.3303 6.29658 21.1922C6.2104 21.0336 6.25626 20.7662 6.34797 20.2314L7.21757 15.1612C7.24468 15.0032 7.25823 14.9241 7.24906 14.8485C7.24094 14.7815 7.21989 14.7168 7.18707 14.6578C7.15 14.5913 7.09256 14.5353 6.97767 14.4234L3.29223 10.8338C2.9038 10.4554 2.70958 10.2663 2.68594 10.0873C2.66538 9.93161 2.71618 9.77494 2.8242 9.66092C2.94835 9.52988 3.21662 9.49067 3.75315 9.41224L8.84822 8.66752C9.00667 8.64436 9.0859 8.63278 9.15489 8.6007C9.21598 8.57229 9.27098 8.5323 9.31684 8.48294C9.36863 8.4272 9.40407 8.3554 9.47495 8.2118L11.7527 3.59726Z" stroke="#F5F5F5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</ng-template>

<ng-template #svgTemplateMatrix>
  <img data-advancement-level="0" class="active" (click)="currentAdvancementLevel($event)" src="assets/other/locked_star.svg" alt="Locked Star">
  <svg width="25" *ngFor="let i of [1, 2, 3]" [attr.data-advancement-level]="i" (click)="currentAdvancementLevel($event)" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M11.7527 3.59726C11.9928 3.11086 12.1129 2.86766 12.2758 2.78996C12.4176 2.72236 12.5824 2.72236 12.7242 2.78996C12.8871 2.86766 13.0072 3.11086 13.2473 3.59725L15.525 8.2118C15.5959 8.3554 15.6314 8.4272 15.6832 8.48294C15.729 8.5323 15.784 8.57229 15.8451 8.6007C15.9141 8.63278 15.9933 8.64436 16.1518 8.66752L21.2468 9.41224C21.7834 9.49067 22.0516 9.52988 22.1758 9.66092C22.2838 9.77494 22.3346 9.93161 22.314 10.0873C22.2904 10.2663 22.0962 10.4554 21.7078 10.8338L18.0223 14.4234C17.9074 14.5353 17.85 14.5913 17.8129 14.6578C17.7801 14.7168 17.7591 14.7815 17.7509 14.8485C17.7418 14.9241 17.7553 15.0032 17.7824 15.1612L18.652 20.2314C18.7437 20.7662 18.7896 21.0336 18.7034 21.1922C18.6284 21.3303 18.4951 21.4271 18.3407 21.4558C18.1631 21.4887 17.923 21.3624 17.4428 21.1099L12.8879 18.7145C12.746 18.6398 12.675 18.6025 12.6002 18.5878C12.534 18.5749 12.466 18.5749 12.3998 18.5878C12.325 18.6025 12.254 18.6398 12.1121 18.7145L7.55719 21.1099C7.07697 21.3624 6.83687 21.4887 6.65933 21.4558C6.50486 21.4271 6.37157 21.3303 6.29658 21.1922C6.2104 21.0336 6.25626 20.7662 6.34797 20.2314L7.21757 15.1612C7.24468 15.0032 7.25823 14.9241 7.24906 14.8485C7.24094 14.7815 7.21989 14.7168 7.18707 14.6578C7.15 14.5913 7.09256 14.5353 6.97767 14.4234L3.29223 10.8338C2.9038 10.4554 2.70958 10.2663 2.68594 10.0873C2.66538 9.93161 2.71618 9.77494 2.8242 9.66092C2.94835 9.52988 3.21662 9.49067 3.75315 9.41224L8.84822 8.66752C9.00667 8.64436 9.0859 8.63278 9.15489 8.6007C9.21598 8.57229 9.27098 8.5323 9.31684 8.48294C9.36863 8.4272 9.40407 8.3554 9.47495 8.2118L11.7527 3.59726Z" stroke="#F5F5F5" stroke-linecap="round" stroke-linejoin="round"/>
  </svg>
</ng-template>

<section class="main">
  <div class="page-intro">
    <div class="titles">
      <h3 class="title">Healing - Calculator</h3>
      <h4 class="subtitle">Lorem ipsum</h4>
    </div>
    <p class="description">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Ipsa maxime sunt in, soluta dolorum aliquam reiciendis vitae omnis dicta doloremque saepe blanditiis, quam similique qui cumque accusamus, voluptate recusandae nulla?</p>
  </div>
  <div class="error-notification" *ngIf="errors.length > 0">
    <img class="error-icon" src="assets/other/error.svg" alt="Error">
    <ul class="error-container">
      <li *ngFor="let error of errors">
        {{ error }}<br>
      </li>
    </ul>
  </div>
  <div class="insertions">
    <div class="units">
      <div class="all-units" [style.display]="showAllUnits ? 'flex' : 'none'">
        <div class="entry" [attr.data-name]="unit.slug" *ngFor="let unit of units" (click)="changeThumbnailUnit(unit)">
          <img class="avatar" src="assets/simulacra/{{unit.slug}}_avatar.webp" alt="Avatar">
          <div class="wrapper">
            <span class="name">{{unit?.name[0]}}</span>
            <span class="description">{{unit?.resonance}}</span>
          </div>
        </div>
      </div>
      <div class="all-matrices" [style.display]="showAllMatrices ? 'flex' : 'none'">
        <ng-container *ngFor="let matrix of matrices">
          <div class="entry" [attr.data-name]="matrix.slug" data-setpc="2pc" (click)="changeThumbnailMatrix(matrix)">
            <img class="avatar" src="assets/matrices/{{matrix.slug}}_matrix.webp" alt="Avatar">
            <div class="wrapper">
              <span class="name">{{matrix?.name}}
                <span class="twopc">2pc</span>
              </span>
              <span class="description">{{matrix.twopc?.buffs?.join(', ')}}</span>
            </div>
          </div>
          <div class="entry" [attr.data-name]="matrix.slug" data-setpc="4pc" (click)="changeThumbnailMatrix(matrix)">
            <img class="avatar" src="assets/matrices/{{matrix.slug}}_matrix.webp" alt="Avatar">
            <div class="wrapper">
              <span class="name">{{matrix.name}}
                <span class="fourpc">4pc</span>
              </span>
              <span class="description">{{matrix.fourpc?.buffs?.join(', ')}}</span>
            </div>
          </div>
        </ng-container>
      </div>
      <div class="all-traits" [style.display]="showAllTraits ? 'flex' : 'none'">
        <div class="entry" [attr.data-name]="trait.slug" *ngFor="let trait of traits" (click)="changeThumbnailTrait(trait)">
          <img class="avatar" src="assets/simulacra/{{trait.slug}}_avatar.webp" alt="Avatar">
          <div class="wrapper">
            <span class="name">{{trait?.name[0]}}</span>
            <!-- {{trait.trait[1].description[0].paragraph}} -->
            <span class="description">Lorem ipsum</span>
          </div>
        </div>
      </div>
      <div class="all-relics" [style.display]="showAllRelics ? 'flex' : 'none'">
        <div class="entry" [attr.data-name]="relic.slug" *ngFor="let relic of relics" (click)="changeThumbnailRelic(relic)">
          <img class="avatar" src="assets/relics/{{relic.slug}}_relic.webp" alt="Avatar">
          <div class="wrapper">
            <span class="name">{{relic.name}}</span>
            <span class="description">Lorem ipsum</span>
          </div>
        </div>
      </div>
      <div class="unit" data-unit="1">
        <div class="simulacra">
          <div class="subtitle">Weapons</div>
          <div class="simulacra-select" (click)="toggleUnitSelect($event, 1)">
            <img src="assets/other/circle_select.svg" alt="Select" class="image">
          </div>
          <div class="stars">
            <ng-container>
              <ng-container *ngTemplateOutlet="svgTemplateUnit"></ng-container>
            </ng-container>
          </div>
        </div>
        <div class="matrices">
          <div class="subtitle">Matrices</div>
          <div class="matrix-wrapper">
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 1, 1)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div> 
            </div>
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 1, 2)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="unit" data-unit="2">
        <div class="simulacra">
          <div class="simulacra-select" (click)="toggleUnitSelect($event, 2)">
            <img src="assets/other/circle_select.svg" alt="Select" class="image">
          </div>
          <div class="stars">
            <ng-container>
              <ng-container *ngTemplateOutlet="svgTemplateUnit"></ng-container>
            </ng-container>
          </div>
        </div>
        <div class="matrices">
          <div class="matrix-wrapper">
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 2, 1)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div> 
            </div>
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 2, 2)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="unit" data-unit="3">
        <div class="simulacra">
          <div class="simulacra-select" (click)="toggleUnitSelect($event, 3)">
            <img src="assets/other/circle_select.svg" alt="Select" class="image">
          </div>
          <div class="stars">
            <ng-container>
              <ng-container *ngTemplateOutlet="svgTemplateUnit"></ng-container>
            </ng-container>
          </div>
        </div>
        <div class="matrices">
          <div class="matrix-wrapper">
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 3, 1)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div> 
            </div>
            <div class="matrix-select-container">
              <div class="matrix-select" (click)="toggleMatrixSelect($event, 3, 2)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateMatrix"></ng-container>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="extras">
      <div class="entry">
        <div class="trait">
          <div class="subtitle">Trait</div>
          <div class="trait-select" (click)="toggleTraitSelect($event)">
            <img src="assets/other/circle_select.svg" alt="Select" class="image">
          </div>
        </div>
      </div>
      <div class="entry">
        <div class="titan-stats">
          <div class="subtitle">Titan Stats</div>
          <div class="stat">
            <img class="stat-icon" src="assets/stats/icon_incheal.webp" alt="Increased Healing Icon">
            <div class="stat-wrapper">
              <label class="stat-label">Increased Healing (Level)</label>
              <input type="number" [(ngModel)]="titanHealing" placeholder="0" class="stat-input">
            </div>
          </div>
        </div>
      </div>
      <div class="entry">
        <div class="relics">
          <div class="subtitle">Relics</div>
          <div class="relic-wrapper">
            <div class="relic-select-container">
              <div class="relic-select" (click)="toggleRelicSelect($event, 1)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <!-- USES UNIT STARS IDK IF THIS IS A PROBLEM -->
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateUnit"></ng-container>
                </ng-container>
              </div>
            </div>
            <div class="relic-select-container">
              <div class="relic-select" (click)="toggleRelicSelect($event, 2)">
                <img src="assets/other/square_select.svg" alt="Select" class="image">
              </div>
              <div class="stars">
                <ng-container>
                  <ng-container *ngTemplateOutlet="svgTemplateUnit"></ng-container>
                </ng-container>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="gear-stats">
      <div class="subtitle">Stats</div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_hp.webp" alt="HP Icon">
        <div class="stat-wrapper">
          <label class="stat-label">HP</label>
          <input type="number" [(ngModel)]="hpStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_crit.webp" alt="Crit Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Crit</label>
          <input type="number" [(ngModel)]="critStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_crit.webp" alt="Crit Rate Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Crit Rate %</label>
          <input type="number" [(ngModel)]="critRateStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_critdmg.webp" alt="Crit DMG Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Crit DMG %</label>
          <input type="number" [(ngModel)]="critDmgStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_atk.webp" alt="Physical ATK Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Physical ATK</label>
          <input type="number" [(ngModel)]="physicalAtkStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_flame.webp" alt="Flame ATK Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Flame ATK</label>
          <input type="number" [(ngModel)]="flameAtkStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_frost.webp" alt="Frost ATK Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Frost ATK</label>
          <input type="number" [(ngModel)]="frostAtkStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_volt.webp" alt="Volt ATK Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Volt ATK</label>
          <input type="number" [(ngModel)]="voltAtkStat" placeholder="0" class="stat-input">
        </div>
      </div>
      <div class="stat">
        <img class="stat-icon" src="assets/stats/icon_altered.webp" alt="Altered ATK Icon">
        <div class="stat-wrapper">
          <label class="stat-label">Altered ATK</label>
          <input type="number" [(ngModel)]="alteredAtkStat" placeholder="0" class="stat-input">
        </div>
      </div>
    </div>
  </div>
  <div class="temp">
    <a (click)="logEverything($event)" class="log-button">LOG IT</a>
  </div>
  <div class="overview">
    <div class="info-selection">
      <!-- (click)="setActiveInfo($event)" #info -->
      <a class="info" (click)="setActiveInfo($event)" #info>Summary</a>
      <a class="info" (click)="setActiveInfo($event)" #info>Breakdown</a>
      <a class="info" (click)="setActiveInfo($event)" #info>Calculations</a>
      <a class="info" (click)="setActiveInfo($event)" #info>Possible Upgrades</a>
      <div class="underline"></div>
    </div>
  </div>
</section>